My final project combines reaction diffusion with a Wii Balance Board control scheme. The backend is in ASP.NET (C#) and uses [Wiimotelib](https://brianpeek.com/wiimotelib/) to read sensor values from the Wii Balance Board. It uses the SignalR library to send these values from the server (C#) to the client (JS) so that the webpage can access them. On the webpage, the WebGPU shader is implemented from scratch.

Once I had gotten the sensor values to the web page, my next step was to combine two previous assignments: WebGPU implementation from scratch and reaction diffusion. I struggled with changing the workgroup size and the bindings. Anything that wasn’t consistent across many different locations caused the whole thing to give a hard-to-debug error. But eventually, I implemented reaction diffusion.

Afterward, I needed to incorporate the sensor values from the Wii Balance Board. My idea for this was to give a directional bias to the convolution while keeping the sum of the convolution values near zero. At first, I simply made the convolution biased in whatever direction the user was leaning (e.g. if the user leans left, the reaction is biased left), but that became uniform very quickly. So instead, I opted to show a location representative of where the user was leaning and bias the convolution toward that location (e.g. if the user stands in the middle, all particles are biased towards the middle). 

I also needed to have a way to clear the board. Otherwise, the screen would fill and not much would change afterward. For fun, I decided that jumping would clear the screen. To do this, I slowly faded out chemical B and slowly faded in chemical A in all areas other than a circle in the middle whenever the total weight threshold on the balance board was sufficiently low. This becomes fun because if you don’t jump for very long, you can clear only some of the board, creating more interesting patterns.

Before I implemented jumping to clear the board, I made a different attempt at clearing it by upping the kill rate for areas that have had high concentrations of B for a long time. This didn’t clear the board, but it did look cool, so you can click “use age” on tweakpane to get a version with more movement and more mitosis that looks very different from the standard version.

The last item I implemented was feedback. The feedback effect makes brand new chemical B green rather than turquoise and causes a slower fade out when chemical B disappears. This leaves some splotches in the background where chemical B used to be, and it lets you see with more clarity what is actively changing right now.

The other two Tweakpane options are mouse controls and weight calibration. You can use the weight calibration slider to change how much the shader divides the sensor values by. You can also select mouse controls rather than Wii Balance Board controls so that you can use the simulation without the C# backend.
